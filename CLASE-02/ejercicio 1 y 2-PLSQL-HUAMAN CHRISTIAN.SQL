--EJERCICIO 01
--Crear una función que permita averiguar si el código de un empleado es valido.
--ESQUEMA: RECURSOS
CREATE OR REPLACE FUNCTION RECURSOS.FNCOD
(VCOD RECURSOS.EMPLEADO.IDEMPLEADO%TYPE ) 
RETURN RECURSOS.EMPLEADO.NOMBRE%TYPE
IS
 VNOMBRE RECURSOS.EMPLEADO.NOMBRE%TYPE;
BEGIN
  SELECT NOMBRE INTO VNOMBRE
  FROM RECURSOS.EMPLEADO WHERE IDEMPLEADO = VCOD;
  RETURN VNOMBRE;
END;
/
--COMPROBANDO FUNCION DEL CODIGO DEL EMPLEADO
SELECT RECURSOS.FNCOD( 'E0002' ) EMPLEADO FROM DUAL;

--EJERCICIO 2
--Crear un procedimiento que permita averiguar 
-- la cantidad de empleados de un departamento, 
-- así como también en importe de su planilla. 
--Debe usar variables de tipo OUT.Esquema: RECURSOS
CREATE OR REPLACE PROCEDURE RECURSOS.PRCANTIDAD
( VDEP OUT RECURSOS.DEPARTAMENTO.NOMBRE%TYPE)
IS
VCAN RECURSOS.EMPLEADO.IDEMPLEADO%TYPE;
BEGIN 
    --CANTIDAD DE EMPLEADO
    SELECT D.NOMBRE,COUNT(E.IDEMPLEADO) CANTIDAD,E.SUELDO
    INTO VCAN
    FROM (RECURSOS.EMPLEADO E
    INNER JOIN RECURSOS.DEPARTAMENTO D ON D.IDDEPARTAMENTO=E.IDDEPARTAMENTO)
    WHERE IDEMPLEADO :=VDEP
    GROUP BY D.NOMBRE,E.SUELDO;   
END;
/